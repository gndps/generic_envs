copy_ssh_keys() {
    if [[ -z "$1" ]]; then
        echo "Error: must provide ssh hostname as argument"
        return 1
    fi
    local ssh_host=$1

    # TBD Find username from .ssh/config
    local username=gundeepsingh

    # List of SSH key files
    files=( "id_rsa" "id_rsa.pub" "activessh" "archive" )

    # Local and remote paths
    local_path="$HOME/.ssh/"
    remote_path=".ssh/"
    ssh_destination="${username}@${ssh_host}"

    # Loop through each file and copy it to the remote machine
    for file in "${files[@]}"; do
        # Construct the full local path
        local_file="$local_path$file"
        if [[ ! -e "$local_file" ]]; then
            echo "Skipping $local_file as it does not exist"
            continue
        fi
        
        # Copy the file to the remote machine
        echo "Copying $local_file to $ssh_destination:$remote_path$file..."
        scp -r "$local_file" "$ssh_destination:$remote_path$file"
    done

    echo "Keys copied and permissions set successfully on $ssh_host"
}

alias sshinit="sshenv activate gndps && copy_ssh_keys"

# Usage:
# copy_ssh_keys hostname
