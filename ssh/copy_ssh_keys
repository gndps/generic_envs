copy_ssh_keys() {
    local ssh_host=$1

    # TBD Find username from .ssh/config
    local username=gundeepsingh

    # List of SSH key files
    files=("id_rsa" "id_rsa.pub" "activessh" "archive" )

    # Local and remote paths
    local_path="$HOME/.ssh/"
    remote_path=".ssh/"
    ssh_destination="${username}@${ssh_host}"

    # Loop through each file and copy it to the remote machine
    for file in "${files[@]}"; do
        # Construct the full local path
        local_file="$local_path$file"
        
        # Copy the file to the remote machine
        scp "$local_file" "$ssh_destination:$remote_path$file"
    done

    Set permissions on the remote machine
    ssh $ssh_destination << 'EOF'
        chmod -R 700 ~/.ssh
        chmod 600 ~/.ssh/authorized_keys
        chmod 644 ~/.ssh/id_rsa.pub
EOF

    echo "Keys copied and permissions set successfully on $ssh_host"
}

# Usage:
# copy_ssh_keys hostname
